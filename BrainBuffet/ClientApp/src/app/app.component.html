<div class="container">
  <div id="contain-non-fluid">
    <!-- HERO -->
    <div class="hero">
      <h1 class="title strokeme"> Brain <i class="fab fa-envira logo"></i> Buffet! </h1>
      <h2 *ngIf="!_participant?.name" class="subtitle">The game for brainiacs</h2>
    </div>
    <!-- User Connected Menu -->
    <div class="dropdown pull-right" *ngIf="_participant?.name">
      <button class="dropbtn">
        <span class="logged-in">
          <i class="fas fa-user-circle"></i> {{_participant?.name}} -
          <i [ngClass]="roleClass(_participant?.role)"></i>
        </span>
      </button>
      <div class="dropdown-content">
        <a href="javascript:void(0);" (click)="quitRole_click()"><i class="fas fa-window-close"></i> Quit Role</a>
      </div>
    </div>

    <div class="main">
      <!-- BEGIN enter name and connect-->
      <div class="flex-container-centerh top-space" *ngIf="_startupState=='begin'">
        <div class="flex-container-centerv">
          <div *ngIf="!_loading" class="flex-container-col">
            <div><input class="big-input" type="text" [(ngModel)]="_playerName" placeholder="Your Name Here" (keydown)="keyDown($event)" /></div>
            <h2 class="btn-large" (click)="start_click()">START</h2>
          </div>
          <div *ngIf="_loading" class="flex-container-col">
            <div class="player-name">{{_playerName}}</div>
            <h4 style="text-align:center">Stand by while we teleport into your brain!</h4>
            <div class="loader">Loading...</div>
          </div>
        </div>
      </div>

      <!-- CHOOSE a role -->
      <div class="flex-container-centerh  top-space" *ngIf="_startupState=='chooser'">
        <div class="flex-container-centerv">
          <div class="flex-container-col">
            <div>
              <div class="player-name">
                {{_playerName}}
              </div>
              <h3 style="text-align:center;">
                Choose your role.
              </h3>
            </div>
            <div>
              <h4 *ngIf="!_gameSession.host" class="btn" (click)="join_click('host')">
                <i class="fas fa-microphone-alt"></i> Host <span class="badge">1</span>
              </h4>
              <h4 *ngIf="_gameSession.host" class="btn-disabled">
                <i class="fas fa-microphone-alt"></i> {{_gameSession?.host?.name}}
              </h4>
              <h4 [ngClass]="isDisabledBtn(_gameSession?.team1?.isFull)" (click)="join_click('team1')">
                <i class="fab fa-rebel"></i> Team 1 <span class="badge">{{_gameSession?.team1?.available}}</span>
              </h4>
              <h4 [ngClass]="isDisabledBtn(_gameSession?.team2?.isFull)" (click)="join_click('team2')">
                <i class="fab fa-empire"></i> Team 2  <span class="badge">{{_gameSession?.team2?.available}}</span>
              </h4>
              <h4 class="btn" (click)="join_click('spectator')">
                <i class="fas fa-users"></i> Spectator <span class="badge">{{_gameSession?.spectators?.length}}</span>
              </h4>
            </div>
          </div>
        </div>
      </div>

      <!-- HOST Page -->
      <div class="flex-container-centerh" *ngIf="_startupState=='host'">
        <div class="flex-container-centerv" style="width:95%">
          <div class="flex-container-col" style="text-align:center">
            <h2>HOST <i [ngClass]="roleClass(_participant?.role)"></i></h2>
          </div>
          <div class="flex-container-centerh top-space">
            <table class="team" id="team1">
              <thead>
                <tr><th colspan="2">Team 1 <i class="fab fa-rebel"></i></th></tr>
              </thead>
              <tbody>
                <tr *ngFor="let member of _gameSession.team1?.members">
                  <td colspan="2">{{member.name}}</td>
                </tr>
                <tr>
                  <td><strong>Score:</strong></td>
                  <td><strong></strong></td>
                </tr>
              </tbody>
            </table>
            <!-- GAME AREA -->
            <div>
              <h2>hello</h2>
            </div>
            <table class="team" id="team2">
              <thead>
                <tr><th colspan="2">Team 2 <i class="fab fa-empire"></i></th></tr>
              </thead>
              <tbody>
                <tr *ngFor="let member of _gameSession.team2?.members">
                  <td colspan="2">{{member.name}}</td>
                </tr>
                <tr>
                  <td><strong>Score:</strong></td>
                  <td><strong></strong></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- TEAM page -->
      <div class="flex-container-centerh" *ngIf="_startupState=='team'">
        <div class="flex-container-centerv" style="width:90%">
          <div class="flex-container-col" style="text-align:center">
            <h2 class="capitalize">{{_participant?.role}} <i [ngClass]="roleClass(_participant?.role)"></i></h2>
          </div>
          <div>

            <table class="team" id="team1">
              <thead>
                <tr><th colspan="2">Team 1 <i class="fab fa-rebel"></i></th></tr>
              </thead>
              <tbody>
                <tr *ngFor="let member of _gameSession.team1?.members">
                  <td colspan="2">{{member.name}}</td>
                </tr>
                <tr>
                  <td><strong>Score:</strong></td>
                  <td><strong></strong></td>
                </tr>
              </tbody>
            </table>

            <table class="team" id="team2">
              <thead>
                <tr><th colspan="2">Team 2 <i class="fab fa-empire"></i></th></tr>
              </thead>
              <tbody>
                <tr *ngFor="let member of _gameSession.team2?.members">
                  <td colspan="2">{{member.name}}</td>
                </tr>
                <tr>
                  <td><strong>Score:</strong></td>
                  <td><strong></strong></td>
                </tr>
              </tbody>
            </table>

          </div>
          <div>
            <!-- TEAM 1 CHAT -->
            <div class="chatbox" *ngIf="_participant.role=='team1'">
              <h4 class="capitalize"><i class="fas fa-comments"></i> {{_participant?.role}} chat </h4>
              <!-- Team 1 chat log-->
              <div id="team1-messages" class="chatbox-messages">
                <ul>
                  <li *ngFor="let m of _team1Messages.slice().reverse()">
                    <span [ngClass]="chatBubble(m.isSelf)">
                      <strong *ngIf="!m.isSelf">{{m.name}}:</strong> {{m.message}}
                    </span>
                  </li>
                </ul>
              </div>
              <!-- Chat textbox -->
              <div style="white-space:nowrap">
                <input class="chatbox-input" type="text" [(ngModel)]="_chat" (keydown)="messageKeyDown($event)" />
                <a href="javascript:void(0)" class="send-btn" (click)="sendMessage_click()"><i class="fas fa-chevron-circle-right"></i></a>
              </div>
            </div>
            <!-- TEAM 2 CHAT -->
            <div *ngIf="_participant.role=='team2'" class="chatbox">
              <h4 class="capitalize"><i class="fas fa-comments"></i> {{_participant?.role}} chat </h4>
              <!-- Team 2 chat log-->
              <div id="team2-messages" class="chatbox-messages">
                <ul>
                  <li *ngFor="let m of _team2Messages.slice().reverse()">
                    <span [ngClass]="chatBubble(m.isSelf)">
                      <strong *ngIf="!m.isSelf">{{m.name}}:</strong> {{m.message}}
                    </span>
                  </li>
                </ul>
              </div>
              <!-- Chat textbox -->
              <div style="white-space:nowrap">
                <input class="chatbox-input" type="text" [(ngModel)]="_chat" (keydown)="messageKeyDown($event)" />
                <a href="javascript:void(0)" class="send-btn" (click)="sendMessage_click()"><i class="fas fa-chevron-circle-right"></i></a>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- SPECTATOR page -->
      <div class="flex-container-centerh" *ngIf="_startupState=='spectator'">
        <div class="flex-container-centerv" style="width:96%">
          <div class="flex-container-col" style="text-align:center">
            <h2>SPECTATOR <i [ngClass]="roleClass(_participant?.role)"></i></h2>
          </div>
          <div>

            <table class="team" id="team1">
              <thead>
                <tr><th colspan="2">Team 1 <i class="fab fa-rebel"></i></th></tr>
              </thead>
              <tbody>
                <tr *ngFor="let member of _gameSession.team1?.members">
                  <td colspan="2">{{member.name}}</td>
                </tr>
                <tr>
                  <td><strong>Score:</strong></td>
                  <td><strong></strong></td>
                </tr>
              </tbody>
            </table>

            <table class="team" id="team2">
              <thead>
                <tr><th colspan="2">Team 2 <i class="fab fa-empire"></i></th></tr>
              </thead>
              <tbody>
                <tr *ngFor="let member of _gameSession.team2?.members">
                  <td colspan="2">{{member.name}}</td>
                </tr>
                <tr>
                  <td><strong>Score:</strong></td>
                  <td><strong></strong></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="flex-container-centerh"  style="width:100%">
            <!-- TEAM 1 CHAT -->
            <div class="chatbox">
              <h4 class="capitalize"><i class="fas fa-comments"></i> Team 1 </h4>
              <!-- Team 1 chat log-->
              <div id="team1-messages" class="chatbox-messages">
                <ul>
                  <li *ngFor="let m of _team1Messages.slice().reverse()">
                    <span [ngClass]="chatBubble(m.isSelf)">
                      <strong *ngIf="!m.isSelf">{{m.name}}:</strong> {{m.message}}
                    </span>
                  </li>
                </ul>
              </div>
            </div>

            <!-- SPECTATOR CHAT -->
            <div class="chatbox">
              <h4 class="capitalize"><i class="fas fa-comments"></i> Spectators </h4>
              <!-- Spectators chat log-->
              <div id="spectator-messages" class="chatbox-messages">
                <ul>
                  <li *ngFor="let m of _spectatorMessages.slice().reverse()">
                    <span [ngClass]="chatBubble(m.isSelf)">
                      <strong *ngIf="!m.isSelf">{{m.name}}:</strong> {{m.message}}
                    </span>
                  </li>
                </ul>
              </div>
              <!-- Chat textbox -->
              <div style="white-space:nowrap">
                <input class="chatbox-input" type="text" [(ngModel)]="_chat" (keydown)="messageKeyDown($event)" />
                <a href="javascript:void(0)" class="send-btn" (click)="sendMessage_click()"><i class="fas fa-chevron-circle-right"></i></a>
              </div>
            </div>

            <!-- TEAM 2 CHAT -->
            <div class="chatbox">
              <h4 class="capitalize"><i class="fas fa-comments"></i> Team 2 </h4>
              <!-- Team 2 chat log-->
              <div id="team2-messages" class="chatbox-messages">
                <ul>
                  <li *ngFor="let m of _team2Messages.slice().reverse()">
                    <span [ngClass]="chatBubble(m.isSelf)">
                      <strong *ngIf="!m.isSelf">{{m.name}}:</strong> {{m.message}}
                    </span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- ROUTER outlet -->
      <router-outlet></router-outlet>
    </div>

  </div>

</div>
